<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Job Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@500;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-deep-black: #000000;
      --bg-card-surface: #0A0A0A;
      --accent-cyan: #00FFFF;
      --border-primary: #374151;
    }

    body {
      background-color: var(--bg-deep-black);
      color: white;
      font-family: 'Roboto Mono', monospace;
    }

    .header-blur {
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--border-primary);
    }

    .card {
      background: var(--bg-card-surface);
      border: 1px solid var(--border-primary);
      border-radius: 22px;
      padding: 1.5rem;
      transition: transform .4s ease, border-color .4s ease;
    }
    .card:hover {
      transform: translateY(-8px);
      border-color: var(--accent-cyan);
    }

    .fade {
      animation: fadeUp 0.8s ease both;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .accent { color: var(--accent-cyan); }

    /* ✅ FIXED FULLSCREEN AUTH BACKGROUND */
   .auth-bg {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;

  background-image: url("https://images.unsplash.com/photo-1497366754035-f200968a6e72?q=80&w=1169&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D");
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;        /*  FILL ENTIRE SCREEN */
  
  z-index: 90;


}


    .auth-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.60);
  display: flex;
  align-items: center;
  justify-content: center;
}


    .auth-card {
      background: rgba(10, 10, 10, 0.92);
      border: 1px solid var(--border-primary);
      border-radius: 22px;
      box-shadow: 0 25px 70px rgba(0,0,0,0.7);
    }
  </style>
</head>

<body class="antialiased">

<!-- NAVBAR -->
<header class="header-blur fixed top-0 left-0 w-full z-[200]">
  <div class="max-w-6xl mx-auto flex justify-between items-center px-6 py-4">
    <h1 class="text-xl font-bold tracking-widest">JOB PORTAL</h1>
    <div class="space-x-4">
      <button onclick="show('login')" class="text-gray-400 hover:text-white">LOGIN</button>
      <button onclick="show('signup')" class="text-gray-400 hover:text-white">SIGNUP</button>
    </div>
  </div>
</header>

<!-- ======================= PORTAL (LOCKED UNTIL LOGIN) ======================= -->
<main class="pt-28 max-w-6xl mx-auto px-6">

  <!-- HOME (HIDDEN BY DEFAULT) -->
  <section id="home" class="hidden grid md:grid-cols-3 gap-8 fade">

    <div class="card">
      <h3 class="text-xl font-bold mb-2">Java Developer</h3>
      <p class="text-gray-400">Infosys</p>
      <p class="text-gray-500 mb-3">Pune</p>
      <button onclick="secureApply()" class="accent font-semibold">APPLY →</button>
    </div>

    <div class="card">
      <h3 class="text-xl font-bold mb-2">Frontend Developer</h3>
      <p class="text-gray-400">TCS</p>
      <p class="text-gray-500 mb-3">Mumbai</p>
      <button onclick="secureApply()" class="accent font-semibold">APPLY →</button>
    </div>

    <div class="card">
      <h3 class="text-xl font-bold mb-2">Spring Boot Intern</h3>
      <p class="text-gray-400">Wipro</p>
      <p class="text-gray-500 mb-3">Hyderabad</p>
      <button onclick="secureApply()" class="accent font-semibold">APPLY →</button>
    </div>

  </section>

  <!-- DASHBOARD -->
  <section id="dashboard" class="hidden fade text-center card p-6 mt-16 max-w-md mx-auto">
    <h2 class="text-xl mb-2">DASHBOARD</h2>
    <p id="userInfo" class="text-gray-400"></p>
    <button onclick="logout()" class="mt-4 text-red-400">LOGOUT</button>
  </section>

  <!-- APPLY -->
  <section id="apply" class="hidden fade max-w-sm mx-auto mt-16 card p-6">
    <h2 class="text-xl mb-4">APPLY JOB</h2>

    <input class="w-full p-2 mb-3 bg-black border border-gray-700 rounded" placeholder="Full Name">
    <input class="w-full p-2 mb-3 bg-black border border-gray-700 rounded" placeholder="Email">
    <input class="w-full p-2 mb-4 bg-black border border-gray-700 rounded" placeholder="Resume Link">

    <button class="w-full border border-cyan-400 py-2 hover:bg-cyan-400 hover:text-black transition">
      SUBMIT
    </button>
  </section>

</main>

<!-- ======================= LOGIN ======================= -->
<section id="login" class="auth-bg">
  <div class="auth-overlay">
    <div class="auth-card w-full max-w-sm p-8 fade">
      <h2 class="text-2xl font-bold mb-6 text-center">LOGIN</h2>

      <input id="loginEmail"
        class="w-full p-3 mb-4 bg-black border border-gray-700 rounded-xl text-white"
        placeholder="Email">

      <input id="loginPass" type="password"
        class="w-full p-3 mb-6 bg-black border border-gray-700 rounded-xl text-white"
        placeholder="Password">

      <button onclick="login()"
        class="w-full border border-cyan-400 py-3 rounded-xl hover:bg-cyan-400 hover:text-black transition">
        LOGIN
      </button>

      <p class="text-center text-gray-300 mt-6 text-sm">
        Don’t have an account?
        <span onclick="show('signup')" class="accent cursor-pointer">SIGNUP</span>
      </p>
    </div>
  </div>
</section>

<!-- ======================= SIGNUP ======================= -->
<section id="signup" class="hidden auth-bg">
  <div class="auth-overlay">
    <div class="auth-card w-full max-w-sm p-8 fade">
      <h2 class="text-2xl font-bold mb-6 text-center">SIGNUP</h2>

      <input id="name"
        class="w-full p-3 mb-4 bg-black border border-gray-700 rounded-xl text-white"
        placeholder="Name">

      <input id="email"
        class="w-full p-3 mb-4 bg-black border border-gray-700 rounded-xl text-white"
        placeholder="Email">

      <input id="password" type="password"
        class="w-full p-3 mb-6 bg-black border border-gray-700 rounded-xl text-white"
        placeholder="Password">

      <button onclick="signup()"
        class="w-full border border-cyan-400 py-3 rounded-xl hover:bg-cyan-400 hover:text-black transition">
        REGISTER
      </button>

      <p class="text-center text-gray-300 mt-6 text-sm">
        Already have an account?
        <span onclick="show('login')" class="accent cursor-pointer">LOGIN</span>
      </p>
    </div>
  </div>
</section>

<!-- ======================= JAVASCRIPT ======================= -->
<script>
const sections = ["home","login","signup","dashboard","apply"];

//  Show one section at a time
function show(id){
  sections.forEach(sec => {
    const el = document.getElementById(sec);
    if(el){
      el.classList.add("hidden");
      el.style.display = "none";
    }
  });

  const active = document.getElementById(id);
  if(active){
    active.classList.remove("hidden");
    active.style.display = "block";
  }

  if(id === "login" || id === "signup"){
    document.body.style.overflow = "hidden";
  } else {
    document.body.style.overflow = "auto";
  }
}

//  PROTECT APPLY
function secureApply(){
  const user = localStorage.getItem("user");
  if(!user){
    alert("Please login first to apply.");
    show("login");
  } else {
    show("apply");
  }
}

//  SIGNUP
function signup(){
  fetch("http://localhost:8080/signup",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      name: name.value,
      email: email.value,
      password: password.value
    })
  })
  .then(r => r.text())
  .then(msg => {
    alert(msg);
    show("login");
  });
}

//  LOGIN
function login(){
  fetch("http://localhost:8080/signin",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      email: loginEmail.value,
      password: loginPass.value
    })
  })
  .then(r => r.json())
  .then(u => {
    if(u){
      localStorage.setItem("user", JSON.stringify(u));
      userInfo.innerText = u.name + " | " + u.email;
      show("home");
    } else {
      alert("Invalid Credentials");
    }
  });
}

// LOGOUT → LOCK AGAIN
function logout(){
  localStorage.clear();
  show("login");
}

//  ON PAGE LOAD → FORCE LOGIN
window.onload = function(){
  const user = localStorage.getItem("user");
  if(user){
    const u = JSON.parse(user);
    userInfo.innerText = u.name + " | " + u.email;
    show("home");
  } else {
    show("login");
  }
}
</script>

</body>
</html>
